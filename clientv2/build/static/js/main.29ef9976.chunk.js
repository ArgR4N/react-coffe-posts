(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{43:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),a=n(35),r=n.n(a),o=n(3),i=(n(43),n(83)),l=n(70),u=n(75),j=n(5),d=n(71),b=n(72),m=n(73),O=n(74),h=n(6),x=n(0),f=function(e){var t=e.inUser,n=void 0!==t&&t,c=e.inForum,a=void 0!==c&&c,r=e.isSaved,i=e.title,j=e.text,f=e.deletePost,p=e.id,g=e.coffees,v=e.updatePost,N=e.postForum,y=e.username,S=e.sessionUsername,w=e.savePost,C=Object(s.useState)(!1),P=Object(o.a)(C,2),F=P[0],k=P[1],L=Object(s.useState)({state:!1,counter:g}),I=Object(o.a)(L,2),U=I[0],T=I[1],E=Object(s.useState)(r),M=Object(o.a)(E,2),_=M[0],A=M[1];return Object(x.jsxs)("div",{className:"card post ".concat(a?"w-100 m-2":""),children:[Object(x.jsxs)(h.b,{style:n?{maxWidth:"none"}:{},to:"/post/".concat(p),className:"card-body",children:[Object(x.jsx)("h5",{className:"card-title",children:i}),Object(x.jsxs)("h6",{className:"card-subtitle mb-2 text-muted",children:[Object(x.jsx)(h.b,{to:"/Forum/".concat(N),children:N})," - ",Object(x.jsx)(h.b,{to:"/Profile/".concat(y),children:y})]}),Object(x.jsx)("p",{className:"card-text",children:j})]}),Object(x.jsxs)("div",{style:n?{display:"none"}:{},className:"btnContainer",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:function(){return k((function(e){return!e}))},children:Object(x.jsx)(l.a,{})}),Object(x.jsx)("div",{style:F?{opacity:"1",transition:".3s"}:{opacity:"0",transition:".3s",visibility:"hidden"},children:Object(x.jsxs)("ul",{className:"btnOptionsContainer",children:[Object(x.jsx)("li",{children:Object(x.jsx)("button",{onClick:function(){w(p,A,_)},className:_?"unsave":"save",children:r?Object(x.jsx)(d.a,{}):Object(x.jsx)(b.a,{})})}),Object(x.jsx)("li",{style:y===S?{}:{display:"none"},children:Object(x.jsx)("button",{onClick:function(){f(p)},className:"delete",children:Object(x.jsx)(m.a,{})})}),Object(x.jsx)("li",{style:y===S?{}:{display:"none"},children:Object(x.jsx)(h.b,{to:"post/".concat(p,"&editing"),children:Object(x.jsx)("button",{className:"edit",children:Object(x.jsx)(O.a,{})})})})]})})]}),Object(x.jsxs)("button",{onMouseLeave:function(){if(g!==U.counter){var e={title:i,text:j,likes:U.counter};v(p,e)}},onClick:function(){return T((function(e){return{state:!0,counter:e.counter+1}}))},className:"Give-a-coffe mb-1",children:[Object(x.jsx)(u.a,{}),Object(x.jsxs)("span",{className:"Give-a-coffeCounter",children:[" ",U.counter>0?U.counter:null," "]})]})]})]})},p=n(4),g=n(76),v=n(77),N=function(e){var t=e.addPost,n=e.username,c=e.user,a=e.forums,r=e.alredyOpen,i=void 0!==r&&r,l=e.clickedForum,u=e.setShowForm;Object(s.useEffect)((function(){O((function(e){return Object(p.a)(Object(p.a)({},e),{},{forum:l})})),I(a)}),[l,a]);var d=Object(s.useState)({title:"",text:"",forum:l||""}),b=Object(o.a)(d,2),m=b[0],O=b[1],h=Object(s.useState)(i),f=Object(o.a)(h,2),N=f[0],y=f[1],S=Object(s.useState)(!1),w=Object(o.a)(S,2),C=w[0],P=w[1],F=Object(s.useState)(a),k=Object(o.a)(F,2),L=k[0],I=k[1],U=function(){return""===m.form?[!1,"You need a forum where post!"]:""===m.title?[!1,"The title needs information!"]:""===m.text?[!1,"The text needs information!"]:m.title.split("").length>250?[!1,"The title have a 250 characters max!"]:m.text.split("").length>950?[!1,"The text have a 950 characters max!"]:[!0,""]};return Object(x.jsxs)("form",{style:N?{border:"none"}:{height:"45px",border:"none"},onSubmit:function(e){if(e.preventDefault(),console.log(m),n){var s=U()[1];if(U()[0])return t(Object(p.a)(Object(p.a)({},m),{},{username:n})),O({title:"",text:""}),y(i),u?u(!1):null;j.b.error(s)}n||j.b.error("You need to be logged in!")},className:"p-2 overflow-hidden w-75 mb-2 mt-4 card",children:[Object(x.jsxs)("div",{onClick:function(){i||(c?y((function(e){return!e})):j.b.error("You need to be logged in!"))},style:{fontSize:"23px",marginBottom:"10px",cursor:"pointer"},className:"d-flex  align-items-center justify-content-between openFormState",children:[Object(x.jsx)("h4",{style:{margin:"0",userSelect:"none"},children:"Create Post"}),Object(x.jsx)("button",{className:"".concat(i?"d-none":""," d-flex align-items-center justify-content-center"),style:{height:"23px",width:"23px"},type:"button",children:N?Object(x.jsx)(g.a,{}):Object(x.jsx)(v.a,{})})]}),Object(x.jsxs)("section",{onClick:function(e){"form-control"===e.target.classList[0]&&P(!0)},className:"mb-3 w-25",children:[Object(x.jsx)("input",{style:{cursor:"pointer"},value:m.forum,disabled:!0,placeholder:"Forum",type:"text",className:"form-control"}),Object(x.jsx)("section",{onClick:function(e){"postFormModal"===e.target.classList[0]&&P(!1)},className:"postFormModal ".concat(C?"":"d-none"),children:Object(x.jsxs)("div",{className:"postForumModalSection",children:[Object(x.jsx)("input",{onChange:function(e){var t=[];a.forEach((function(n){if(!n.name.toLowerCase().includes(e.target.value.toLowerCase()))return null;t.push(n)})),I(t),0===t.length&&setTimeout((function(){return P(!1)}),3e3)},placeholder:"Search",type:"text",className:"form-control"}),Object(x.jsx)("ul",{children:L.map((function(e){return Object(x.jsxs)("li",{onClick:function(){return function(e){P(!1),O((function(t){return Object(p.a)(Object(p.a)({},t),{},{forum:e})}))}(e.name)},children:[" ",e.name," "]})}))}),Object(x.jsx)("button",{type:"button",onClick:function(e){return P(!1)},className:"btn btn-danger",children:"Cancel"})]})})]}),Object(x.jsx)("div",{className:"mb-3 w-75",children:Object(x.jsx)("input",{onChange:function(e){O((function(t){return Object(p.a)(Object(p.a)({},t),{},{title:e.target.value})}))},value:m.title,placeholder:"Title",type:"text",className:"form-control","aria-describedby":"emailHelp"})}),Object(x.jsx)("div",{className:"mb-3",children:Object(x.jsx)("textarea",{onChange:function(e){O((function(t){return Object(p.a)(Object(p.a)({},t),{},{text:e.target.value})}))},value:m.text,placeholder:"Text",className:"form-control",rows:"6"})}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{type:"submit",className:"w-25 btn btn-main",children:"Post"})})]})},y=function(e){var t=e.postsList,n=e.addPost,s=e.deletePost,c=e.updatePost,a=e.user,r=e.savePost,o=e.forums,i=function(e){var t=!1;return a.savedPosts.forEach((function(n){return n===e?t=!t:null})),t};return Object(x.jsx)("main",{className:"d-flex flex-row justify-content-center",children:Object(x.jsxs)("section",{className:"mainSection",children:[Object(x.jsx)("div",{className:"d-flex justify-content-center w-100",children:Object(x.jsx)(N,{addPost:n,username:!!a&&a.username,user:a,forums:o})}),Object(x.jsx)("div",{className:"mt-3 postsContainer",children:t.map((function(e){return Object(x.jsx)(f,{inUser:!1,savePost:r,isSaved:!!a&&i(e._id),updatePost:c,title:e.title,text:e.text,deletePost:s,id:e._id,postForum:e.forum,username:e.user,coffees:e.likes,sessionUsername:a?a.username:""},e._id)}))})]})})},S=n(78),w=n(79),C=n(80),P=n(81),F=n(37),k=function(e){var t=e.postsList,n=e.user,c=e.setDisplayShow,a=e.displayShow,r=e.navBarOpen,i=e.setNavBarOpen,l=Object(s.useState)(""),j=Object(o.a)(l,2),d=j[0],b=j[1],m=Object(s.useState)([]),O=Object(o.a)(m,2),f=O[0],p=O[1];return Object(x.jsxs)("nav",{onClick:function(){return i(!1)},className:"navBar ".concat(r?"navBarOpen":""),children:[Object(x.jsx)(F.a,{place:"bottom"}),Object(x.jsxs)(h.b,{"data-tip":"Home",to:"/",className:"gap-2 navText",children:[Object(x.jsx)(u.a,{}),"CoffeePosts"]}),Object(x.jsxs)(h.b,{to:"/",className:"gap-2 navText navHomeBtn",children:[Object(x.jsx)(S.a,{}),"Home"]}),Object(x.jsx)("div",{className:"navSocailFunctions",children:Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:Object(x.jsx)(h.b,{to:"/Forums",children:Object(x.jsxs)("div",{children:[Object(x.jsx)(w.a,{}),"Forums"]})})}),Object(x.jsx)("li",{children:Object(x.jsx)(h.b,{to:"/Profile",children:n?Object(x.jsxs)("div",{children:[Object(x.jsx)(C.a,{}),n.username]}):Object(x.jsxs)("div",{children:[Object(x.jsx)(C.a,{}),"LogIn"]})})})]})}),Object(x.jsxs)("div",{style:{cursor:"default"},className:" navItem navSearch navItem",children:[Object(x.jsx)("input",{placeholder:"Search...",className:"navItem",value:d,onChange:function(e){if(b(e.target.value),""!==e.target.value){c(!0);var n=[];t.forEach((function(t){if(!t.title.toLowerCase().includes(e.target.value.toLowerCase()))return null;n.push(t)})),p(n)}else c(!1),p([])},type:"text"}),Object(x.jsxs)("section",{className:"navItem searchDisplay",style:a?{}:{display:"none"},children:[Object(x.jsx)("h5",{children:"Posts"}),f.length>0?Object(x.jsx)("div",{children:f.map((function(e){return Object(x.jsx)(h.b,{to:"/post/".concat(e._id),children:Object(x.jsxs)("button",{className:"navItem navBarFounded ",onClick:function(){return c(!1)},style:{color:"grey"},children:[Object(x.jsx)("span",{className:"navItem",style:{color:"white"},children:e.title}),Object(x.jsx)("br",{})," ",e.forum," - ",e.user]})})}))}):Object(x.jsx)("h6",{style:{color:"grey"},className:" navItem mt-2",children:"Nothing Found!"}),Object(x.jsx)(h.b,{to:"/Searching&search=".concat(d),className:"searchDisplayOthers",children:"See more posts, users or forums here! "})]}),Object(x.jsx)(h.b,{"data-tip":"Search",className:"d-flex align-items-center",to:"/Searching&search=".concat(d),children:Object(x.jsx)(P.a,{})})]})]})},L=n(8),I=n(7),U=n.n(I),T=n(82),E=function(e){var t=e.updatePost,n=e.deletePost,c=e.setPostsList,a=e.sessionUsername,r=(e.savePost,Object(L.g)()),l=r.postId,d=r.editingParam,f=Object(s.useState)({}),g=Object(o.a)(f,2),v=g[0],N=g[1],y=Object(s.useState)({title:"",text:""}),S=Object(o.a)(y,2),w=S[0],C=S[1],P=Object(s.useState)({original:0,actual:0}),F=Object(o.a)(P,2),k=F[0],I=F[1],E=Object(s.useState)(" "),M=Object(o.a)(E,2),_=M[0],A=M[1],B=Object(s.useState)(d),D=Object(o.a)(B,2),Y=D[0],H=D[1];Object(s.useEffect)((function(){var e=j.b.loading("Loading...");U.a.get("/api/posts/".concat(l)).then((function(t){var n={title:t.data.title,text:t.data.text,id:t.data._id,username:t.data.user};I({original:t.data.likes,actual:t.data.likes}),N(n),C({title:t.data.title,text:t.data.text}),j.b.dismiss(e)}))}),[l]);var J=function(){return""===w.title?[!1,"The title needs information!"]:""===w.text?[!1,"The text needs information!"]:w.title.split("").length>250?[!1,"The title have a 250 characters max!"]:w.text.split("").length>950?[!1,"The text have a 950 characters max!"]:w.title===v.title&&w.text===v.text?[!1,"You can\xb4t update a post with no changes!"]:[!0,""]};return Object(x.jsx)("main",{className:"d-flex flex-row justify-content-center",children:v.title?Y?Object(x.jsxs)("div",{className:"card selectedPost",children:[Object(x.jsxs)("form",{className:"gap-2 w-100 d-flex p-5 justify-content-center align-items-center",style:{flexDirection:"column"},children:[Object(x.jsx)("input",{onChange:function(e){return C((function(t){return Object(p.a)(Object(p.a)({},t),{},{title:e.target.value})}))},value:w.title,placeholder:v.title,className:"w-75 input form-control"}),Object(x.jsx)("textarea",{onChange:function(e){return C((function(t){return Object(p.a)(Object(p.a)({},t),{},{text:e.target.value})}))},value:w.text,rows:"6",placeholder:v.text,className:"w-75 form-control"}),Object(x.jsxs)("small",{children:[" ",_," "]})]}),Object(x.jsx)("div",{className:"btnContainer",children:Object(x.jsx)("div",{children:Object(x.jsxs)("ul",{style:{height:"300px",transform:"scale(2.2)"},className:"btnOptionsContainer d-flex flex-colums justify-content-center align-items-center gap-3",children:[Object(x.jsx)("li",{children:Object(x.jsx)(h.b,{onClick:function(){if(J()[0]){H(!1);var e={title:w.title,text:w.text,likes:k.actual};U.a.put("/api/posts/".concat(v.id),e).then((function(e){var t={title:e.data.title,text:e.data.text,id:e.data._id,user:e.data.user};I({original:e.data.likes,actual:e.data.likes}),N(t),j.b.success("Edited!")})),U.a.get("/api/posts").then((function(e){c(e.data.posts)}))}else A(J()[1])},to:"/post/".concat(v.id),children:Object(x.jsx)("button",{children:Object(x.jsx)(T.a,{})})})}),Object(x.jsx)("li",{children:Object(x.jsx)(h.b,{onClick:function(){return H(!1)},to:"/post/".concat(v.id),children:Object(x.jsx)("button",{children:Object(x.jsx)(i.a,{})})})})]})})})]}):Object(x.jsxs)("div",{className:"card selectedPost",children:[Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("h5",{className:"card-title",children:v.title}),Object(x.jsxs)("h6",{className:"card-subtitle mb-2 text-muted",children:["forum - ",v.username," "]}),Object(x.jsx)("p",{className:"card-text",children:v.text})]}),Object(x.jsx)("div",{className:"btnContainer",children:Object(x.jsx)("div",{children:Object(x.jsxs)("ul",{className:"btnOptionsContainer",children:[Object(x.jsx)("li",{children:Object(x.jsx)("button",{className:"save",children:Object(x.jsx)(b.a,{})})}),Object(x.jsx)("li",{children:Object(x.jsx)(h.b,{style:v.username===a?{}:{display:"none"},to:"/",children:Object(x.jsx)("button",{onClick:function(){n(v.id)},className:"delete",children:Object(x.jsx)(m.a,{})})})}),Object(x.jsx)("li",{children:Object(x.jsx)("div",{style:v.username===a?{}:{display:"none"},onClick:function(){return H(!0)},children:Object(x.jsx)("button",{className:"edit",children:Object(x.jsx)(O.a,{})})})}),Object(x.jsx)("li",{children:Object(x.jsx)("div",{children:Object(x.jsx)("button",{onMouseLeave:function(){if(k.actual!==k.original){var e={title:v.title,text:v.text,likes:k.actual};t(v.id,e),I((function(e){return Object(p.a)(Object(p.a)({},e),{},{original:k.actual})}))}},onClick:function(){return I((function(e){return Object(p.a)(Object(p.a)({},e),{},{actual:e.actual+1})}))},className:"Give-a-coffe mb-1",children:Object(x.jsx)(u.a,{})})})}),Object(x.jsx)("li",{children:Object(x.jsx)("div",{children:Object(x.jsxs)("small",{className:"coffeeCounter",children:[k.actual," ",Object(x.jsx)(u.a,{})]})})})]})})})]}):"Searching ..."})},M=n(16),_=n(84),A=n(85),B=n(86),D=function(e){var t=e.forum,n=e.user,c=e.setShowForm,a=e.setClickedForum,r=e.joinFunction,i=e.unJoinFunction,l=t.name,u=t.description,d=Object(s.useState)(!1),b=Object(o.a)(d,2),m=b[0],O=b[1];Object(s.useEffect)((function(){n&&n.forums.forEach((function(e){e===l&&O(!0)}))}),[l,n]);return Object(x.jsxs)(h.b,{to:"/Forum/".concat(l),children:[Object(x.jsxs)("main",{className:"forum",children:[Object(x.jsxs)("h2",{children:[" ",l," "]}),Object(x.jsxs)("p",{children:[" ",u," "]})]}),Object(x.jsxs)("div",{className:"forumBtnContainer",children:[m?Object(x.jsxs)(h.b,{to:"/Forums",onClick:n?function(e){i(l,O)}:function(){return j.b.error("You need to be logged in!")},className:"btn ".concat(n?m?"btn-danger":"btn-main":"btn-secondary"),children:["UnJoin",Object(x.jsx)(_.a,{})]}):Object(x.jsxs)(h.b,{to:"/Forums",onClick:n?function(e){r(l,O)}:function(){return j.b.error("You need to be logged in!")},className:"btn ".concat(n?m?"btn-danger":"btn-main":"btn-secondary"),children:["Join",Object(x.jsx)(A.a,{})]}),Object(x.jsxs)(h.b,{to:"/Forums",onClick:n?function(e){c((function(e){return!e})),a("name")}:function(){return j.b.error("You need to be logged in!")},className:"btn ".concat(n?"btn-second":"btn-secondary"),children:["Post",Object(x.jsx)(B.a,{})]})]})]})},Y=function(e){var t=e.showModal,n=(e.setShowModal,e.createForm),c=e.handLeModalClick,a=Object(s.useState)({name:"",description:""}),r=Object(o.a)(a,2),i=r[0],l=r[1];return Object(x.jsx)("main",{onClick:c,style:t?{}:{display:"none"},className:"forumFormModal",children:Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=""===i.name?"The forum needs a name!":""===i.description?"The forum needs almost a simple description!":i.name.split("").length>250?"The name have a 250 characters max!":i.description.split("").length>1500?"The description have a 1500 characters max!":"";""===t?n(i):j.b.error(t)},style:{margin:"0 auto"},className:"forumForm",children:[Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{className:"form-label",children:"Name"}),Object(x.jsx)("input",{placeholder:"Name",value:i.name,onChange:function(e){l((function(t){return Object(p.a)(Object(p.a)({},t),{},{name:e.target.value})}))},type:"text",className:"form-control"})]}),Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{className:"form-label",children:"Description"}),Object(x.jsx)("textarea",{placeholder:"Description",value:i.description,onChange:function(e){l((function(t){return Object(p.a)(Object(p.a)({},t),{},{description:e.target.value})}))},className:"form-control",rows:"4"})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-main",children:"Create"})]})})},H=function(e){var t=e.forums,n=e.createForm,c=e.showModal,a=e.setShowModal,r=e.user,i=e.addPost,l=e.setUser,u=Object(s.useState)(""),d=Object(o.a)(u,2),b=d[0],m=d[1],O=Object(s.useState)(t),h=Object(o.a)(O,2),f=h[0],p=h[1],g=Object(s.useState)(!1),v=Object(o.a)(g,2),y=v[0],S=v[1],w=Object(s.useState)(""),C=Object(o.a)(w,2),F=C[0],k=C[1];Object(s.useEffect)((function(){p(t)}),[t]);var L=function(e,t){U.a.put("/api/users/".concat(r.id),{forums:[].concat(Object(M.a)(r.forums),[e])}).then((function(e){e.data.state&&(t(!0),l(e.data.newUser))}))},I=function(e,t){var n=r.forums;console.log(n),n.splice(r.forums.indexOf(e),1),console.log(n),U.a.put("/api/users/".concat(r.id),{forums:n}).then((function(e){return t(!1)}))},T=function(e){"forumFormModal"===e.target.classList[0]&&(a(!1),S(!1))};return Object(x.jsxs)("main",{children:[Object(x.jsx)("section",{onClick:T,className:"forumFormModal ".concat(y?null:"d-none"," "),children:Object(x.jsx)(N,{username:!!r&&r.username,user:r,forums:t,alredyOpen:!0,clickedForum:F,addPost:i,setShowForm:S})}),Object(x.jsx)(Y,{handLeModalClick:T,user:r,createForm:n,showModal:c,setShowModal:a}),Object(x.jsx)("button",{onClick:function(){r?a((function(e){return!e})):j.b.error("You need to be logged in")},className:"btn ".concat(y?"d-none":""," ").concat(c?"btn-danger":"btn-forum"," mt-1 mx-2 position-fixed"),children:c?"Cancel":"Create Forum"}),Object(x.jsx)("button",{onClick:function(e){return S(!1)},className:"btn ".concat(y?"":"d-none"," btn-danger mt-1 mx-2 position-fixed"),children:"Cancel"}),Object(x.jsx)("h2",{style:{textAlign:"center"},children:" Search for Forums "}),Object(x.jsxs)("div",{className:"forumSearchBar  d-flex align-items-center justify-content-center gap-2",children:[Object(x.jsx)(P.a,{}),Object(x.jsx)("input",{onChange:function(e){if(m(e.target.value),""!==e.target.value){var n=[];t.forEach((function(t){t.name.toLowerCase().includes(e.target.value.toLowerCase())&&n.push(t)})),p(n)}else p(t)},value:b,placeholder:"Just type...",type:"text"})]}),Object(x.jsxs)("h4",{className:"mt-3 mb-2",style:{textAlign:"center"},children:[" ","".concat(f.length," ").concat(1!==f.length?"Forums":"Forum")," "]}),Object(x.jsx)("ul",{className:"forumsContainer",children:f.map((function(e){return Object(x.jsx)("div",{onClick:function(t){return k(e.name)},children:Object(x.jsx)(D,{setClickedForum:k,user:r,forum:e,setShowForm:S,unJoinFunction:I,joinFunction:L},e.name)},e.name)}))})]})},J=function(e){var t=e.logInFunction,n=e.user,c=Object(s.useState)({username:"",password:""}),a=Object(o.a)(c,2),r=a[0],i=a[1],l=function(e){e.preventDefault(),""!==r.username&&""!==r.password&&t(r)};return n?Object(x.jsx)(L.a,{to:"/Home"}):Object(x.jsxs)("form",{onSubmit:l,className:"logInForm",children:[Object(x.jsx)("h3",{children:"Log In"}),Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{className:"form-label",children:"Username"}),Object(x.jsx)("input",{onChange:function(e){return i((function(t){return Object(p.a)(Object(p.a)({},t),{},{username:e.target.value})}))},value:r.username,type:"text",className:"form-control"})]}),Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{className:"form-label",children:"Password"}),Object(x.jsx)("input",{onChange:function(e){return i((function(t){return Object(p.a)(Object(p.a)({},t),{},{password:e.target.value})}))},value:r.password,type:"password",className:"form-control",id:"exampleInputPassword1"})]}),Object(x.jsx)("button",{type:"submit",style:{marginRight:"25px"},className:"btn btn-primary ",children:"Log In"}),Object(x.jsx)(h.b,{to:"/Register",children:"You don\xb4t have an account?"})]})},R=function(e){var t=e.registerFunction,n=(e.user,Object(s.useState)({username:"",password:""})),c=Object(o.a)(n,2),a=c[0],r=c[1];return Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==a.username&&""!==a.password&&t(a)},className:"logInForm",children:[Object(x.jsx)("h3",{children:"Register"}),Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{className:"form-label",children:"Username"}),Object(x.jsx)("input",{onChange:function(e){return r((function(t){return Object(p.a)(Object(p.a)({},t),{},{username:e.target.value})}))},value:a.username,type:"text",className:"form-control"})]}),Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{className:"form-label",children:"Password"}),Object(x.jsx)("input",{onChange:function(e){return r((function(t){return Object(p.a)(Object(p.a)({},t),{},{password:e.target.value})}))},value:a.password,type:"password",className:"form-control",id:"exampleInputPassword1"})]}),Object(x.jsx)("button",{type:"submit",style:{marginRight:"25px"},className:"btn btn-primary",children:"Register"}),Object(x.jsx)(h.b,{to:"/LogIn",children:"You alredy have an account?"})]})},G=function(e){var t=Object(L.g)().forum,n=Object(s.useState)({name:"",description:"",users:[]}),c=Object(o.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)([]),l=Object(o.a)(i,2),u=l[0],j=l[1];Object(s.useEffect)((function(){U.a.get("/api/forums/".concat(t)).then((function(e){e.data.name?r(e.data):L.a})),U.a.get("/api/forum=".concat(t,"/posts")).then((function(e){j(e.data.postsList)}))}),[t]);var d=a.name,b=a.description,m=a.users;return Object(x.jsxs)("main",{className:"selectedForum",children:[Object(x.jsxs)("section",{className:"selectedForumInfo",children:[Object(x.jsxs)("div",{className:"d-flex gap-2 p-1",children:[" ",Object(x.jsx)("h2",{className:"d-inline-block p-0",children:d})," ",Object(x.jsx)("button",{className:"btn btn-info",children:"Join"})," "]}),Object(x.jsx)("ul",{children:m.map((function(e){return Object(x.jsx)("h3",{children:" user "})}))})]}),Object(x.jsxs)("section",{style:{margin:"0 auto"},className:" w-75 d-flex justify-content-between",children:[Object(x.jsx)("article",{className:"w-75",children:u.length>0?Object(x.jsx)("ul",{className:"w-100",children:u.map((function(e){return Object(x.jsx)("div",{className:"d-flex justify-content-center ",children:Object(x.jsx)(f,{title:e.title,text:e.text,id:e._id,username:e.user,coffees:e.likes,postForum:e.forum,inForum:!0},e._id)})}))}):Object(x.jsx)("h2",{style:{textAlign:"center"},children:"Any post"})}),Object(x.jsxs)("article",{className:"card my-2 p-2 w-25",style:{backgroundColor:"white"},children:[Object(x.jsx)("h5",{className:"",children:"About the forum:"}),b]})]})]})},W=n(20),z=function(e){var t=Object(L.g)().user,n=Object(s.useState)(null),c=Object(o.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),u=l[0],j=l[1],d=Object(s.useState)([]),b=Object(o.a)(d,2),m=b[0],O=b[1];Object(s.useEffect)((function(){U.a.get("/api/user/".concat(t)).then((function(e){return r(e.data)})),U.a.get("/api/user=".concat(t,"/posts")).then((function(e){O(e.data.postsList)}))}),[t]);return a?Object(x.jsxs)("div",{style:{width:"100vw",margin:"0 auto"},className:"profileSection",children:[0!==m.length?Object(x.jsx)("ul",{className:"userPosts",children:m.map((function(e){return Object(x.jsx)(f,{inUser:!0,title:e.title,text:e.text,id:e._id,username:e.user,coffees:e.likes,sessionUsername:t?t.username:""},e._id)}))}):(setTimeout((function(){j(!1)}),2e3),u?Object(x.jsx)(W.a,{className:"mt-5",animation:"border"}):Object(x.jsx)("h5",{children:"Any posts..."})),Object(x.jsxs)("section",{className:"userInfo",children:[Object(x.jsxs)("h3",{children:[" ",a.username," "]}),Object(x.jsx)("h6",{children:"Description:"}),Object(x.jsx)("textarea",{disabled:!0,className:"form-control"}),Object(x.jsx)("h3",{children:"Forums:"}),t.forums&&t.forums.length>0?t.forums.map((function(e){return Object(x.jsxs)("div",{children:[" ",e," "]})})):Object(x.jsx)("h3",{style:{textAlign:"center"},children:" Any forum"})]})]}):Object(x.jsx)("h2",{style:{textAlign:"center"},children:" There is no user!"})},q=function(e){var t=e.postsList,n=(e.forums,Object(L.g)().search),c=Object(s.useState)(!0),a=Object(o.a)(c,2),r=a[0],i=a[1],l=Object(s.useState)({posts:t,users:[]}),u=Object(o.a)(l,2),j=u[0];u[1];return Object(x.jsxs)("main",{children:[Object(x.jsxs)("div",{className:"bg-white p-2",children:[Object(x.jsx)("h3",{children:n}),Object(x.jsx)("h6",{children:"Founded posts and users:"})]}),Object(x.jsxs)("div",{className:"d-flex gap-2 p-2",children:[Object(x.jsx)("button",{onClick:function(){return i(!0)},className:"btn btn-second".concat(r?"":"ary"),children:"Posts"}),Object(x.jsx)("button",{onClick:function(){return i(!1)},className:"btn btn-second".concat(r?"ary":""),children:"Users"})]}),Object(x.jsxs)("div",{className:"d-flex",children:[Object(x.jsxs)("section",{style:r?{}:{display:"none"},className:"w-100 mx-3",children:[Object(x.jsx)("h4",{children:"Posts"}),Object(x.jsx)("ul",{className:"m-0 p-0",children:j.posts.map((function(e){return Object(x.jsx)(f,{title:e.title,text:e.text,id:e._id,postForum:e.forum,username:e.user,coffees:e.likes},e._id)}))})]}),Object(x.jsx)("section",{className:"w-100 mx-3",style:r?{display:"none"}:{},children:Object(x.jsx)("h4",{children:"Users"})})]})]})},K=n(87),Q=n(88),V=n(89),X=n(90),Z=function(e){var t=e.user,n=e.logOutFunction,c=Object(s.useState)([]),a=Object(o.a)(c,2),r=a[0],i=a[1],l=Object(s.useState)(!0),u=Object(o.a)(l,2),d=u[0],b=u[1],m=Object(s.useState)(t?t.savedPosts:[]),O=Object(o.a)(m,2),g=O[0],v=O[1],N=Object(s.useState)(!1),y=Object(o.a)(N,2),S=y[0],w=y[1],C=Object(s.useState)({description:t?t.description:"",editing:!1}),P=Object(o.a)(C,2),F=P[0],k=P[1];Object(s.useEffect)((function(){if(t){U.a.get("/api/user=".concat(t.username,"/posts")).then((function(e){i(e.data.postsList)}));var e=[];g.forEach((function(t){U.a.get("/api/posts/".concat(t)).then((function(t){e.push(t.data)}))})),v(e)}}),[t]);var I=function(e){k((function(e){return Object(p.a)(Object(p.a)({},e),{},{editing:!e.editing})}))},T=function(e){if(t.description===F.description)j.b.error("No change made");else if(F.description.length>550)j.b.error("The description have a 550 max!");else{var n=U.a.put("/api/users/".concat(t.id),{description:F.description}).then((function(e){k((function(e){return Object(p.a)(Object(p.a)({},e),{},{editing:!1})}))}));j.b.promise(n,{loading:"Updating...",success:"Edited!",error:"Error!"})}};return t?Object(x.jsxs)("div",{style:{width:"100vw",margin:"0 auto"},className:"profileSection",children:[Object(x.jsxs)("ul",{className:"userPosts",children:[Object(x.jsx)("button",{style:{color:"white"},onClick:function(e){return S&&w(!1)},className:"btn btn-second".concat(S?"ary":""," my-2 mx-1"),children:"Your Posts"}),Object(x.jsx)("button",{onClick:function(e){return S||w(!0)},className:"btn btn-second".concat(S?"":"ary"," my-2 mx-1"),children:"Saved Posts"}),S?g[0]?g.map((function(e){return Object(x.jsx)(f,{inUser:!0,title:e.title,text:e.text,id:e._id,username:e.user,coffees:e.likes,postForum:e.forum,sessionUsername:t?t.username:""},e._id)})):Object(x.jsx)("h3",{style:{textAlign:"center"},children:"Any Saved Post Yet"}):r.length>0?r.map((function(e){return Object(x.jsx)(f,{inUser:!0,title:e.title,text:e.text,postForum:e.forum,id:e._id,username:e.user,coffees:e.likes,sessionUsername:t?t.username:""},e._id)})):(setTimeout((function(){b(!1)}),2e3),d?Object(x.jsx)(W.a,{className:"mt-5",animation:"border"}):Object(x.jsx)("h3",{style:{textAlign:"center"},children:"Any Post Yet"}))]}),Object(x.jsxs)("section",{className:"userInfo",children:[Object(x.jsxs)("h3",{children:[" ",t.username,Object(x.jsx)("button",{onClick:function(){return n()},className:"logout",children:Object(x.jsx)(K.a,{})})]}),Object(x.jsxs)("div",{className:"descriptionSection",children:[Object(x.jsx)("textarea",{disabled:!F.editing,onChange:function(e){return k((function(t){return Object(p.a)(Object(p.a)({},t),{},{description:e.target.value})}))},value:F.description,className:"form-control",placeholder:"Description"}),Object(x.jsx)("div",{style:{minWidth:"50px",width:"25%"},children:F.editing?Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:T,children:Object(x.jsx)(Q.a,{})}),Object(x.jsx)("button",{onClick:I,children:Object(x.jsx)(V.a,{})})]}):Object(x.jsx)("button",{onClick:I,children:Object(x.jsx)(X.a,{})})})]}),Object(x.jsx)("h3",{children:"Forums:"}),Object(x.jsx)("div",{style:{minHeight:"50vh"},className:" d-flex flex-column overflow-auto",children:t.forums&&t.forums.length>0?t.forums.map((function(e){return Object(x.jsxs)(h.b,{className:"my-1 mx-3 d-flex alig-items-center card px-3 py-2",to:"/Forum/".concat(e),children:[" ",Object(x.jsx)("h4",{children:e})," "]})})):Object(x.jsx)("h3",{style:{textAlign:"center"},children:" Any forum "})})]})]}):Object(x.jsx)(L.a,{to:"/LogIn"})},$=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)([]),r=Object(o.a)(a,2),d=r[0],b=r[1],m=Object(s.useState)(null),O=Object(o.a)(m,2),f=O[0],g=O[1],v=Object(s.useState)(!1),N=Object(o.a)(v,2),S=N[0],w=N[1],C=Object(s.useState)(!1),P=Object(o.a)(C,2),F=P[0],I=P[1];Object(s.useEffect)((function(){!function(e){U.a.get("/api/posts").then((function(t){e(t.data.posts)}))}(b),function(e){U.a.get("/api/forums").then((function(t){e(t.data.forums)}))}(c),function(e){U.a.get("/api/user").then((function(t){if(t.data.msg)return null;e(t.data),console.log(t.data),j.b.success("Welcome back ".concat(t.data.username,"!"),{icon:"\ud83d\udc4b",duration:1500})}))}(g)}),[]);var T=function(e){return function(e,t){var n=U.a.post("/api/posts",e).then((function(e){t((function(t){return[e.data].concat(Object(M.a)(t))}))}));j.b.promise(n,{loading:"Posting...",success:"Posted!",error:function(e){return console.log(e)}})}(e,b)},_=function(e){return function(e,t,n){var s=[],c=U.a.delete("/api/posts/".concat(e)).then((function(c){n.forEach((function(t){return t._id===e?null:s.push(t)})),t(s)}));j.b.promise(c,{loading:"Deleting...",success:"Successfully deleted",error:function(e){return"This just happened: ".concat(e.toString(),"!")}})}(e,b,d)},A=function(e,t){return function(e,t,n){U.a.put("/api/posts/".concat(e),t).then((function(t){t.data[0]&&n((function(n){return n.map((function(n){return n._id!==e?n:t.data}))})),j.b.success("Successfully updated!")}))}(e,t,b)},B=function(e,t,n){return function(e,t,n,s,c){if(s){var a=U.a.put("/api/users/".concat(s?s.id:"none"),{postId:e,savedPosts:s.savedPosts}).then((function(e){t((function(e){return!e})),c((function(t){return Object(p.a)(Object(p.a)({},t),{},{savedPosts:e.data.readyUser.savedPosts})}))}));j.b.promise(a,{loading:"Saving...",success:"Succesfyllu ".concat(n?"UnSaved":"Saved"),error:function(e){return"Error while saving: ".concat(e.data)}})}else j.b.error("You are not logged in...")}(e,t,n,f,g)},D=Object(s.useState)(!1),Y=Object(o.a)(D,2),W=Y[0],K=Y[1];return Object(x.jsx)(h.a,{children:Object(x.jsxs)("div",{onClick:function(e){"navItem"!==e.target.classList[0]&&K(!1)},className:"main",children:[Object(x.jsx)(j.a,{position:window.screen.width>600?"bottom-right":"top-center",reverseOrder:!1,toastOptions:{className:"toast"}}),Object(x.jsxs)("div",{className:"navBarResponsiveBtn",children:[Object(x.jsx)("button",{onClick:window.window<600?{}:function(){w((function(e){return!e}))},children:S?Object(x.jsx)(i.a,{}):Object(x.jsx)(l.a,{})}),Object(x.jsxs)("button",{className:"gap-2 navText",children:[Object(x.jsx)(u.a,{}),"CoffeePosts"]})]}),Object(x.jsx)(k,{setNavBarOpen:w,navBarOpen:S,postsList:d,user:f,setDisplayShow:K,displayShow:W}),Object(x.jsx)("hr",{className:"my-5"}),Object(x.jsxs)(L.d,{children:[Object(x.jsx)(L.b,{path:"/Searching&search=:search",children:Object(x.jsx)(q,{forums:n,postsList:d})}),Object(x.jsx)(L.b,{path:"/Post/:postId&:editingParam",children:Object(x.jsx)(E,{sessionUsername:f?f.username:"",addPost:T,savePost:B,deletePost:_,updatePost:A,user:f,setPostsList:b})}),Object(x.jsx)(L.b,{path:"/Post/:postId",children:Object(x.jsx)(E,{sessionUsername:f?f.username:"",addPost:T,savePost:B,setPostsList:b,deletePost:_,updatePost:A})}),Object(x.jsx)(L.b,{path:"/Forums",children:Object(x.jsx)(H,{setUser:g,addPost:T,user:f,forums:n,createForm:function(e){return function(e,t,n){var s=U.a.post("/api/forums",e).then((function(e){e.data&&(t((function(t){return[].concat(Object(M.a)(t),[e.data[1]])})),n(!1))}));j.b.promise(s,{loading:"Creating form...",success:"Forum created!",error:"The forum alredy exist!"})}(e,c,I)},showModal:F,setShowModal:I})}),Object(x.jsx)(L.b,{path:"/Forum/:forum",children:Object(x.jsx)(G,{})}),Object(x.jsx)(L.b,{path:"/Profile/:user",children:Object(x.jsx)(z,{})}),Object(x.jsx)(L.b,{path:"/Profile",children:Object(x.jsx)(Z,{logOutFunction:function(e){return function(e){U.a.get("/api/logout").then((function(){e(null),Object(j.b)("Logged Out!",{icon:"\ud83d\udc4c"})}))}(g)},user:f})}),Object(x.jsx)(L.b,{path:"/LogIn",children:Object(x.jsx)(J,{logInFunction:function(e){return function(e,t){var n=U.a.post("api/login",e).then((function(e){var n=Object(o.a)(e.data,2),s=n[0],c=n[1],a=c.username,r=c._id,i=c.createdAt,l=c.savedPosts,u=c.forums;s?t({username:a,id:r,createdAt:i,savedPosts:l,forums:u}):(t(null),j.b.error("Username or Password wrong!"))}));j.b.promise(n,{loading:"Login in...",error:"User or Password are wrong!",success:"Logged!"})}(e,g)},user:f})}),Object(x.jsx)(L.b,{path:"/Register",children:Object(x.jsx)(R,{registerFunction:function(e){return function(e,t){if(""!==e.username&&""!==e.password){var n=U.a.post("api/register",e).then((function(e){t(e.data[1])}));j.b.promise(n,{loading:"Registering...",success:"User Created!",error:function(e){return e.toString()}})}}(e,g)},user:f})}),Object(x.jsx)(L.b,{path:"/Home",children:Object(x.jsx)(y,{user:f,postsList:d,addPost:T,deletePost:_,updatePost:A,savePost:B,forums:n.length>0?n:[]})}),Object(x.jsx)(L.b,{path:"/:noFound",children:function(){return Object(x.jsx)("h3",{style:{textAlign:"center"},children:"404 Page Not Found"})}}),Object(x.jsx)(L.b,{path:"/",children:Object(x.jsx)(L.a,{to:"/Home"})})]})]})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,91)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),s(e),c(e),a(e),r(e)}))};r.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)($,{})}),document.getElementById("root")),ee()}},[[67,1,2]]]);
//# sourceMappingURL=main.29ef9976.chunk.js.map