(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{41:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),a=n(34),r=n.n(a),o=n(3),i=(n(41),n(80)),l=n(67),u=n(72),j=n(5),d=n(68),b=n(69),m=n(70),O=n(71),h=n(7),f=n(0),x=function(e){var t=e.inUser,n=void 0!==t&&t,c=e.isSaved,a=e.title,r=e.text,i=e.deletePost,j=e.id,x=e.coffees,p=e.updatePost,g=e.postForum,v=e.username,N=e.sessionUsername,y=e.savePost,S=Object(s.useState)(!1),C=Object(o.a)(S,2),w=C[0],P=C[1],F=Object(s.useState)({state:!1,counter:x}),k=Object(o.a)(F,2),L=k[0],I=k[1],T=Object(s.useState)(c),U=Object(o.a)(T,2),E=U[0],M=U[1];return Object(f.jsxs)("div",{className:"card post ",children:[Object(f.jsxs)(h.b,{style:n?{maxWidth:"none"}:{},to:"/post/".concat(j),className:"card-body",children:[Object(f.jsx)("h5",{className:"card-title",children:a}),Object(f.jsxs)("h6",{className:"card-subtitle mb-2 text-muted",children:[Object(f.jsx)(h.b,{to:"/Forum/".concat(g),children:g})," - ",Object(f.jsx)(h.b,{to:"/Profile/".concat(v),children:v})]}),Object(f.jsx)("p",{className:"card-text",children:r})]}),Object(f.jsxs)("div",{style:n?{display:"none"}:{},className:"btnContainer",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:function(){return P((function(e){return!e}))},children:Object(f.jsx)(l.a,{})}),Object(f.jsx)("div",{style:w?{opacity:"1",transition:".3s"}:{opacity:"0",transition:".3s",visibility:"hidden"},children:Object(f.jsxs)("ul",{className:"btnOptionsContainer",children:[Object(f.jsx)("li",{children:Object(f.jsx)("button",{onClick:function(){y(j,M,E)},className:E?"unsave":"save",children:c?Object(f.jsx)(d.a,{}):Object(f.jsx)(b.a,{})})}),Object(f.jsx)("li",{style:v===N?{}:{display:"none"},children:Object(f.jsx)("button",{onClick:function(){i(j)},className:"delete",children:Object(f.jsx)(m.a,{})})}),Object(f.jsx)("li",{style:v===N?{}:{display:"none"},children:Object(f.jsx)(h.b,{to:"post/".concat(j,"&editing"),children:Object(f.jsx)("button",{className:"edit",children:Object(f.jsx)(O.a,{})})})})]})})]}),Object(f.jsxs)("button",{onMouseLeave:function(){if(x!==L.counter){var e={title:a,text:r,likes:L.counter};p(j,e)}},onClick:function(){return I((function(e){return{state:!0,counter:e.counter+1}}))},className:"Give-a-coffe mb-1",children:[Object(f.jsx)(u.a,{}),Object(f.jsxs)("span",{className:"Give-a-coffeCounter",children:[" ",L.counter>0?L.counter:null," "]})]})]})]})},p=n(4),g=n(73),v=n(74),N=function(e){var t=e.addPost,n=e.username,c=e.user,a=e.forums,r=e.alredyOpen,i=void 0!==r&&r,l=e.clickedForum,u=e.setShowForm;Object(s.useEffect)((function(){O((function(e){return Object(p.a)(Object(p.a)({},e),{},{forum:l})})),I(a)}),[l,a]);var d=Object(s.useState)({title:"",text:"",forum:l||""}),b=Object(o.a)(d,2),m=b[0],O=b[1],h=Object(s.useState)(i),x=Object(o.a)(h,2),N=x[0],y=x[1],S=Object(s.useState)(!1),C=Object(o.a)(S,2),w=C[0],P=C[1],F=Object(s.useState)(a),k=Object(o.a)(F,2),L=k[0],I=k[1],T=function(){return""===m.form?[!1,"You need a forum where post!"]:""===m.title?[!1,"The title needs information!"]:""===m.text?[!1,"The text needs information!"]:m.title.split("").length>250?[!1,"The title have a 250 characters max!"]:m.text.split("").length>950?[!1,"The text have a 950 characters max!"]:[!0,""]};return Object(f.jsxs)("form",{style:N?{border:"none"}:{height:"45px",border:"none"},onSubmit:function(e){if(e.preventDefault(),console.log(m),n){var s=T()[1];if(T()[0])return t(Object(p.a)(Object(p.a)({},m),{},{username:n})),O({title:"",text:""}),y(!1),u?u(!1):null;j.b.error(s)}n||j.b.error("You need to be logged in!")},className:"p-2 overflow-hidden w-75 mb-2 mt-4 card",children:[Object(f.jsxs)("div",{onClick:function(){i||(c?y((function(e){return!e})):j.b.error("You need to be logged in!"))},style:{fontSize:"23px",marginBottom:"10px",cursor:"pointer"},className:"d-flex  align-items-center justify-content-between openFormState",children:[Object(f.jsx)("h4",{style:{margin:"0",userSelect:"none"},children:"Create Post"}),Object(f.jsx)("button",{className:"".concat(i?"d-none":""," d-flex align-items-center justify-content-center"),style:{height:"23px",width:"23px"},type:"button",children:N?Object(f.jsx)(g.a,{}):Object(f.jsx)(v.a,{})})]}),Object(f.jsxs)("section",{onClick:function(e){"form-control"===e.target.classList[0]&&P(!0)},className:"mb-3 w-25",children:[Object(f.jsx)("input",{style:{cursor:"pointer"},value:m.forum,disabled:!0,placeholder:"Forum",type:"text",className:"form-control"}),Object(f.jsx)("section",{onClick:function(e){"postFormModal"===e.target.classList[0]&&P(!1)},className:"postFormModal ".concat(w?"":"d-none"),children:Object(f.jsxs)("div",{className:"postForumModalSection",children:[Object(f.jsx)("input",{onChange:function(e){var t=[];a.forEach((function(n){if(!n.name.toLowerCase().includes(e.target.value.toLowerCase()))return null;t.push(n)})),I(t),0===t.length&&setTimeout((function(){return P(!1)}),3e3)},placeholder:"Search",type:"text",className:"form-control"}),Object(f.jsx)("ul",{children:L.map((function(e){return Object(f.jsxs)("li",{onClick:function(){return function(e){P(!1),O((function(t){return Object(p.a)(Object(p.a)({},t),{},{forum:e})}))}(e.name)},children:[" ",e.name," "]})}))}),Object(f.jsx)("button",{type:"button",onClick:function(e){return P(!1)},className:"btn btn-danger",children:"Cancel"})]})})]}),Object(f.jsx)("div",{className:"mb-3 w-75",children:Object(f.jsx)("input",{onChange:function(e){O((function(t){return Object(p.a)(Object(p.a)({},t),{},{title:e.target.value})}))},value:m.title,placeholder:"Title",type:"text",className:"form-control","aria-describedby":"emailHelp"})}),Object(f.jsx)("div",{className:"mb-3",children:Object(f.jsx)("textarea",{onChange:function(e){O((function(t){return Object(p.a)(Object(p.a)({},t),{},{text:e.target.value})}))},value:m.text,placeholder:"Text",className:"form-control",rows:"6"})}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",className:"w-25 btn btn-main",children:"Post"})})]})},y=function(e){var t=e.postsList,n=e.addPost,s=e.deletePost,c=e.updatePost,a=e.user,r=e.savePost,o=e.forums,i=function(e){var t=!1;return a.savedPosts.forEach((function(n){return n===e?t=!t:null})),t};return Object(f.jsx)("main",{className:"d-flex flex-row justify-content-center",children:Object(f.jsxs)("section",{className:"mainSection",children:[Object(f.jsx)("div",{className:"d-flex justify-content-center w-100",children:Object(f.jsx)(N,{addPost:n,username:!!a&&a.username,user:a,forums:o})}),Object(f.jsx)("div",{className:"mt-3 postsContainer",children:t.map((function(e){return Object(f.jsx)(x,{inUser:!1,savePost:r,isSaved:!!a&&i(e._id),updatePost:c,title:e.title,text:e.text,deletePost:s,id:e._id,postForum:e.forum,username:e.user,coffees:e.likes,sessionUsername:a?a.username:""},e._id)}))})]})})},S=n(75),C=n(76),w=n(77),P=n(78),F=function(e){var t=e.postsList,n=e.user,c=e.setDisplayShow,a=e.displayShow,r=e.navBarOpen,i=e.setNavBarOpen,l=Object(s.useState)(""),j=Object(o.a)(l,2),d=j[0],b=j[1],m=Object(s.useState)([]),O=Object(o.a)(m,2),x=O[0],p=O[1];return Object(f.jsxs)("nav",{onClick:function(){return i(!1)},className:"navBar ".concat(r?"navBarOpen":""),children:[Object(f.jsxs)(h.b,{to:"/",className:"gap-2 navText",children:[Object(f.jsx)(u.a,{}),"CoffeePosts"]}),Object(f.jsxs)(h.b,{to:"/",className:"gap-2 navText navHomeBtn",children:[Object(f.jsx)(S.a,{}),"Home"]}),Object(f.jsx)("div",{className:"navSocailFunctions",children:Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:Object(f.jsx)(h.b,{to:"/Forums",children:Object(f.jsxs)("div",{children:[Object(f.jsx)(C.a,{}),"Forums"]})})}),Object(f.jsx)("li",{children:Object(f.jsx)(h.b,{to:"/Profile",children:n?Object(f.jsxs)("div",{children:[Object(f.jsx)(w.a,{}),n.username]}):Object(f.jsxs)("div",{children:[Object(f.jsx)(w.a,{}),"LogIn"]})})})]})}),Object(f.jsxs)("div",{className:" navItem navSearch navItem",children:[Object(f.jsx)(P.a,{}),Object(f.jsx)("input",{className:"navItem",value:d,onChange:function(e){if(b(e.target.value),""!==e.target.value){c(!0);var n=[];t.forEach((function(t){if(!t.title.toLowerCase().includes(e.target.value.toLowerCase()))return null;n.push(t)})),p(n)}else c(!1),p([])},type:"text"}),Object(f.jsxs)("section",{className:"navItem searchDisplay",style:a?{}:{display:"none"},children:[Object(f.jsx)("h5",{children:"Posts"}),x.length>0?Object(f.jsx)("div",{children:function(e){var t=[];return e.forEach((function(n){e.indexOf(n)<3&&t.push(n)})),t}(x).map((function(e){return Object(f.jsx)(h.b,{to:"/post/".concat(e._id),children:Object(f.jsxs)("button",{className:"navItem navBarFounded ",onClick:function(){return c(!1)},style:{color:"grey"},children:[Object(f.jsx)("span",{className:"navItem",style:{color:"white"},children:e.title}),Object(f.jsx)("br",{})," Bard-main / ",e.user]})})}))}):Object(f.jsx)("h6",{style:{color:"grey"},className:" navItem mt-2",children:"Nothing Found!"})]})]})]})},k=n(8),L=n(6),I=n.n(L),T=n(79),U=function(e){var t=e.updatePost,n=e.deletePost,c=e.setPostsList,a=e.sessionUsername,r=(e.savePost,Object(k.g)()),l=r.postId,d=r.editingParam,x=Object(s.useState)({}),g=Object(o.a)(x,2),v=g[0],N=g[1],y=Object(s.useState)({title:"",text:""}),S=Object(o.a)(y,2),C=S[0],w=S[1],P=Object(s.useState)({original:0,actual:0}),F=Object(o.a)(P,2),L=F[0],U=F[1],E=Object(s.useState)(" "),M=Object(o.a)(E,2),A=M[0],_=M[1],B=Object(s.useState)(d),D=Object(o.a)(B,2),Y=D[0],R=D[1];Object(s.useEffect)((function(){var e=j.b.loading("Loading...");I.a.get("/api/posts/".concat(l)).then((function(t){var n={title:t.data.title,text:t.data.text,id:t.data._id,username:t.data.user};U({original:t.data.likes,actual:t.data.likes}),N(n),w({title:t.data.title,text:t.data.text}),j.b.dismiss(e)}))}),[l]);var H=function(){return""===C.title?[!1,"The title needs information!"]:""===C.text?[!1,"The text needs information!"]:C.title.split("").length>250?[!1,"The title have a 250 characters max!"]:C.text.split("").length>950?[!1,"The text have a 950 characters max!"]:C.title===v.title&&C.text===v.text?[!1,"You can\xb4t update a post with no changes!"]:[!0,""]};return Object(f.jsx)("main",{className:"d-flex flex-row justify-content-center",children:v.title?Y?Object(f.jsxs)("div",{className:"card selectedPost",children:[Object(f.jsxs)("form",{className:"gap-2 w-100 d-flex p-5 justify-content-center align-items-center",style:{flexDirection:"column"},children:[Object(f.jsx)("input",{onChange:function(e){return w((function(t){return Object(p.a)(Object(p.a)({},t),{},{title:e.target.value})}))},value:C.title,placeholder:v.title,className:"w-75 input form-control"}),Object(f.jsx)("textarea",{onChange:function(e){return w((function(t){return Object(p.a)(Object(p.a)({},t),{},{text:e.target.value})}))},value:C.text,rows:"6",placeholder:v.text,className:"w-75 form-control"}),Object(f.jsxs)("small",{children:[" ",A," "]})]}),Object(f.jsx)("div",{className:"btnContainer",children:Object(f.jsx)("div",{children:Object(f.jsxs)("ul",{style:{height:"300px",transform:"scale(2.2)"},className:"btnOptionsContainer d-flex flex-colums justify-content-center align-items-center gap-3",children:[Object(f.jsx)("li",{children:Object(f.jsx)(h.b,{onClick:function(){if(H()[0]){R(!1);var e={title:C.title,text:C.text,likes:L.actual};I.a.put("/api/posts/".concat(v.id),e).then((function(e){var t={title:e.data.title,text:e.data.text,id:e.data._id,user:e.data.user};U({original:e.data.likes,actual:e.data.likes}),N(t),j.b.success("Edited!")})),I.a.get("/api/posts").then((function(e){c(e.data.posts)}))}else _(H()[1])},to:"/post/".concat(v.id),children:Object(f.jsx)("button",{children:Object(f.jsx)(T.a,{})})})}),Object(f.jsx)("li",{children:Object(f.jsx)(h.b,{onClick:function(){return R(!1)},to:"/post/".concat(v.id),children:Object(f.jsx)("button",{children:Object(f.jsx)(i.a,{})})})})]})})})]}):Object(f.jsxs)("div",{className:"card selectedPost",children:[Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("h5",{className:"card-title",children:v.title}),Object(f.jsxs)("h6",{className:"card-subtitle mb-2 text-muted",children:["forum - ",v.username," "]}),Object(f.jsx)("p",{className:"card-text",children:v.text})]}),Object(f.jsx)("div",{className:"btnContainer",children:Object(f.jsx)("div",{children:Object(f.jsxs)("ul",{className:"btnOptionsContainer",children:[Object(f.jsx)("li",{children:Object(f.jsx)("button",{className:"save",children:Object(f.jsx)(b.a,{})})}),Object(f.jsx)("li",{children:Object(f.jsx)(h.b,{style:v.username===a?{}:{display:"none"},to:"/",children:Object(f.jsx)("button",{onClick:function(){n(v.id)},className:"delete",children:Object(f.jsx)(m.a,{})})})}),Object(f.jsx)("li",{children:Object(f.jsx)("div",{style:v.username===a?{}:{display:"none"},onClick:function(){return R(!0)},children:Object(f.jsx)("button",{className:"edit",children:Object(f.jsx)(O.a,{})})})}),Object(f.jsx)("li",{children:Object(f.jsx)("div",{children:Object(f.jsx)("button",{onMouseLeave:function(){if(L.actual!==L.original){var e={title:v.title,text:v.text,likes:L.actual};t(v.id,e),U((function(e){return Object(p.a)(Object(p.a)({},e),{},{original:L.actual})}))}},onClick:function(){return U((function(e){return Object(p.a)(Object(p.a)({},e),{},{actual:e.actual+1})}))},className:"Give-a-coffe mb-1",children:Object(f.jsx)(u.a,{})})})}),Object(f.jsx)("li",{children:Object(f.jsx)("div",{children:Object(f.jsxs)("small",{className:"coffeeCounter",children:[L.actual," ",Object(f.jsx)(u.a,{})]})})})]})})})]}):"Searching ..."})},E=n(16),M=n(81),A=n(82),_=n(83),B=function(e){var t=e.forum,n=e.user,c=e.setShowForm,a=e.setClickedForum,r=e.joinFunction,i=e.unJoinFunction,l=t.name,u=t.description,d=Object(s.useState)(!1),b=Object(o.a)(d,2),m=b[0],O=b[1];Object(s.useEffect)((function(){n&&n.forums.forEach((function(e){e===l&&O(!0)}))}),[l,n]);return Object(f.jsxs)(h.b,{to:"/Forum/".concat(l),children:[Object(f.jsxs)("main",{className:"forum",children:[Object(f.jsxs)("h2",{children:[" ",l," "]}),Object(f.jsxs)("p",{children:[" ",u," "]})]}),Object(f.jsxs)("div",{className:"forumBtnContainer",children:[m?Object(f.jsxs)(h.b,{to:"/Forums",onClick:n?function(e){i(l,O)}:function(){return j.b.error("You need to be logged in!")},className:"btn ".concat(n?m?"btn-danger":"btn-info":"btn-secondary"),children:["UnJoin",Object(f.jsx)(M.a,{})]}):Object(f.jsxs)(h.b,{to:"/Forums",onClick:n?function(e){r(l,O)}:function(){return j.b.error("You need to be logged in!")},className:"btn ".concat(n?m?"btn-danger":"btn-info":"btn-secondary"),children:["Join",Object(f.jsx)(A.a,{})]}),Object(f.jsxs)(h.b,{to:"/Forums",onClick:n?function(e){c((function(e){return!e})),a("name")}:function(){return j.b.error("You need to be logged in!")},className:"btn ".concat(n?"btn-second":"btn-secondary"),children:["Post",Object(f.jsx)(_.a,{})]})]})]})},D=function(e){var t=e.showModal,n=(e.setShowModal,e.createForm),c=e.handLeModalClick,a=Object(s.useState)({name:"",description:""}),r=Object(o.a)(a,2),i=r[0],l=r[1];return Object(f.jsx)("main",{onClick:c,style:t?{}:{display:"none"},className:"forumFormModal",children:Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=""===i.name?"The forum needs a name!":""===i.description?"The forum needs almost a simple description!":i.name.split("").length>250?"The name have a 250 characters max!":i.description.split("").length>1500?"The description have a 1500 characters max!":"";""===t?n(i):j.b.error(t)},style:{margin:"0 auto"},className:"forumForm",children:[Object(f.jsxs)("div",{className:"mb-3",children:[Object(f.jsx)("label",{className:"form-label",children:"Name"}),Object(f.jsx)("input",{placeholder:"Name",value:i.name,onChange:function(e){l((function(t){return Object(p.a)(Object(p.a)({},t),{},{name:e.target.value})}))},type:"text",className:"form-control"})]}),Object(f.jsxs)("div",{className:"mb-3",children:[Object(f.jsx)("label",{className:"form-label",children:"Description"}),Object(f.jsx)("textarea",{placeholder:"Description",value:i.description,onChange:function(e){l((function(t){return Object(p.a)(Object(p.a)({},t),{},{description:e.target.value})}))},className:"form-control",rows:"4"})]}),Object(f.jsx)("button",{type:"submit",className:"btn btn-main",children:"Create"})]})})},Y=function(e){var t=e.forums,n=e.createForm,c=e.showModal,a=e.setShowModal,r=e.user,i=e.addPost,l=e.setUser,u=Object(s.useState)(""),d=Object(o.a)(u,2),b=d[0],m=d[1],O=Object(s.useState)(t),h=Object(o.a)(O,2),x=h[0],p=h[1],g=Object(s.useState)(!1),v=Object(o.a)(g,2),y=v[0],S=v[1],C=Object(s.useState)(""),w=Object(o.a)(C,2),F=w[0],k=w[1];Object(s.useEffect)((function(){p(t)}),[t]);var L=function(e,t){I.a.put("/api/users/".concat(r.id),{forums:[].concat(Object(E.a)(r.forums),[e])}).then((function(e){e.data.state&&(t(!0),l(e.data.newUser))}))},T=function(e,t){var n=r.forums;console.log(n),n.splice(r.forums.indexOf(e),1),console.log(n),I.a.put("/api/users/".concat(r.id),{forums:n}).then((function(e){return t(!1)}))},U=function(e){"forumFormModal"===e.target.classList[0]&&(a(!1),S(!1))};return Object(f.jsxs)("main",{children:[Object(f.jsx)("section",{onClick:U,className:"forumFormModal ".concat(y?null:"d-none"," "),children:Object(f.jsx)(N,{username:!!r&&r.username,user:r,forums:t,alredyOpen:!0,clickedForum:F,addPost:i,setShowForm:S})}),Object(f.jsx)(D,{handLeModalClick:U,user:r,createForm:n,showModal:c,setShowModal:a}),Object(f.jsx)("button",{onClick:function(){r?a((function(e){return!e})):j.b.error("You need to be logged in")},className:"btn ".concat(y?"d-none":""," ").concat(c?"btn-danger":"btn-forum"," mt-1 mx-2 position-fixed"),children:c?"Cancel":"Create Forum"}),Object(f.jsx)("button",{onClick:function(e){return S(!1)},className:"btn ".concat(y?"":"d-none"," btn-danger mt-1 mx-2 position-fixed"),children:"Cancel"}),Object(f.jsx)("h2",{style:{textAlign:"center"},children:" Search for Forums "}),Object(f.jsxs)("div",{className:"forumSearchBar  d-flex align-items-center justify-content-center gap-2",children:[Object(f.jsx)(P.a,{}),Object(f.jsx)("input",{onChange:function(e){if(m(e.target.value),""!==e.target.value){var n=[];t.forEach((function(t){t.name.toLowerCase().includes(e.target.value.toLowerCase())&&n.push(t)})),p(n)}else p(t)},value:b,placeholder:"Just type...",type:"text"})]}),Object(f.jsxs)("h4",{className:"mt-3 mb-2",style:{textAlign:"center"},children:[" ","".concat(x.length," ").concat(1!==x.length?"Forums":"Forum")," "]}),Object(f.jsx)("ul",{className:"forumsContainer",children:x.map((function(e){return Object(f.jsx)("div",{onClick:function(t){return k(e.name)},children:Object(f.jsx)(B,{setClickedForum:k,user:r,forum:e,setShowForm:S,unJoinFunction:T,joinFunction:L},e.name)},e.name)}))})]})},R=function(e){var t=e.logInFunction,n=e.user,c=Object(s.useState)({username:"",password:""}),a=Object(o.a)(c,2),r=a[0],i=a[1],l=function(e){e.preventDefault(),""!==r.username&&""!==r.password&&t(r)};return n?Object(f.jsx)(k.a,{to:"/Home"}):Object(f.jsxs)("form",{onSubmit:l,className:"logInForm",children:[Object(f.jsx)("h3",{children:"Log In"}),Object(f.jsxs)("div",{className:"mb-3",children:[Object(f.jsx)("label",{className:"form-label",children:"Username"}),Object(f.jsx)("input",{onChange:function(e){return i((function(t){return Object(p.a)(Object(p.a)({},t),{},{username:e.target.value})}))},value:r.username,type:"text",className:"form-control"})]}),Object(f.jsxs)("div",{className:"mb-3",children:[Object(f.jsx)("label",{className:"form-label",children:"Password"}),Object(f.jsx)("input",{onChange:function(e){return i((function(t){return Object(p.a)(Object(p.a)({},t),{},{password:e.target.value})}))},value:r.password,type:"password",className:"form-control",id:"exampleInputPassword1"})]}),Object(f.jsx)("button",{type:"submit",style:{marginRight:"25px"},className:"btn btn-primary ",children:"Log In"}),Object(f.jsx)(h.b,{to:"/Register",children:"You don\xb4t have an account?"})]})},H=function(e){var t=e.registerFunction,n=(e.user,Object(s.useState)({username:"",password:""})),c=Object(o.a)(n,2),a=c[0],r=c[1];return Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==a.username&&""!==a.password&&t(a)},className:"logInForm",children:[Object(f.jsx)("h3",{children:"Register"}),Object(f.jsxs)("div",{className:"mb-3",children:[Object(f.jsx)("label",{className:"form-label",children:"Username"}),Object(f.jsx)("input",{onChange:function(e){return r((function(t){return Object(p.a)(Object(p.a)({},t),{},{username:e.target.value})}))},value:a.username,type:"text",className:"form-control"})]}),Object(f.jsxs)("div",{className:"mb-3",children:[Object(f.jsx)("label",{className:"form-label",children:"Password"}),Object(f.jsx)("input",{onChange:function(e){return r((function(t){return Object(p.a)(Object(p.a)({},t),{},{password:e.target.value})}))},value:a.password,type:"password",className:"form-control",id:"exampleInputPassword1"})]}),Object(f.jsx)("button",{type:"submit",style:{marginRight:"25px"},className:"btn btn-primary",children:"Register"}),Object(f.jsx)(h.b,{to:"/LogIn",children:"You alredy have an account?"})]})},J=function(e){var t=Object(k.g)().forum,n=Object(s.useState)({name:"",description:"",users:[]}),c=Object(o.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)([]),l=Object(o.a)(i,2),u=l[0],j=l[1];Object(s.useEffect)((function(){I.a.get("/api/forums/".concat(t)).then((function(e){e.data.name?r(e.data):k.a})),I.a.get("/api/forum=".concat(t,"/posts")).then((function(e){j(e.data.postsList)}))}),[t]);var d=a.name,b=a.description,m=a.users;return Object(f.jsxs)("main",{className:"selectedForum",children:[Object(f.jsxs)("section",{className:"selectedForumInfo",children:[Object(f.jsxs)("h2",{children:[" ",d," "]}),Object(f.jsxs)("p",{children:[" ",b," "]}),Object(f.jsx)("ul",{children:m.map((function(e){return Object(f.jsx)("h3",{children:" user "})}))})]}),u.length>0?Object(f.jsx)("ul",{className:"w-100",children:u.map((function(e){return Object(f.jsx)("div",{className:"d-flex justify-content-center",children:Object(f.jsx)(x,{title:e.title,text:e.text,id:e._id,username:e.user,coffees:e.likes,postForum:e.forum},e._id)})}))}):Object(f.jsx)("h2",{style:{textAlign:"center"},children:"Any post"})]})},G=n(20),W=function(e){var t=Object(k.g)().user,n=Object(s.useState)(null),c=Object(o.a)(n,2),a=c[0],r=c[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),u=l[0],j=l[1],d=Object(s.useState)([]),b=Object(o.a)(d,2),m=b[0],O=b[1];Object(s.useEffect)((function(){I.a.get("/api/user/".concat(t)).then((function(e){return r(e.data)})),I.a.get("/api/user=".concat(t,"/posts")).then((function(e){O(e.data.postsList)}))}),[t]);return a?Object(f.jsxs)("div",{style:{width:"100vw",margin:"0 auto"},className:"profileSection",children:[0!==m.length?Object(f.jsx)("ul",{className:"userPosts",children:m.map((function(e){return Object(f.jsx)(x,{inUser:!0,title:e.title,text:e.text,id:e._id,username:e.user,coffees:e.likes,sessionUsername:t?t.username:""},e._id)}))}):(setTimeout((function(){j(!1)}),2e3),u?Object(f.jsx)(G.a,{className:"mt-5",animation:"border"}):Object(f.jsx)("h5",{children:"Any posts..."})),Object(f.jsxs)("section",{className:"userInfo",children:[Object(f.jsxs)("h3",{children:[" ",a.username," "]}),Object(f.jsx)("h6",{children:"Description:"}),Object(f.jsx)("textarea",{disabled:!0,className:"form-control"}),Object(f.jsx)("h3",{children:"Forums:"}),t.forums&&t.forums.length>0?t.forums.map((function(e){return Object(f.jsxs)("div",{children:[" ",e," "]})})):Object(f.jsx)("h3",{style:{textAlign:"center"},children:" Any forum"})]})]}):Object(f.jsx)("h2",{style:{textAlign:"center"},children:" There is no user!"})},z=n(84),q=n(85),K=n(86),Q=n(87),V=function(e){var t=e.user,n=e.logOutFunction,c=Object(s.useState)([]),a=Object(o.a)(c,2),r=a[0],i=a[1],l=Object(s.useState)(!0),u=Object(o.a)(l,2),d=u[0],b=u[1],m=Object(s.useState)(t?t.savedPosts:[]),O=Object(o.a)(m,2),g=O[0],v=O[1],N=Object(s.useState)(!1),y=Object(o.a)(N,2),S=y[0],C=y[1],w=Object(s.useState)({description:t?t.description:"",editing:!1}),P=Object(o.a)(w,2),F=P[0],L=P[1];Object(s.useEffect)((function(){if(t){I.a.get("/api/user=".concat(t.username,"/posts")).then((function(e){i(e.data.postsList)}));var e=[];g.forEach((function(t){I.a.get("/api/posts/".concat(t)).then((function(t){e.push(t.data)}))})),v(e)}}),[t]);var T=function(e){L((function(e){return Object(p.a)(Object(p.a)({},e),{},{editing:!e.editing})}))},U=function(e){if(t.description===F.description)j.b.error("No change made");else if(F.description.length>550)j.b.error("The description have a 550 max!");else{var n=I.a.put("/api/users/".concat(t.id),{description:F.description}).then((function(e){L((function(e){return Object(p.a)(Object(p.a)({},e),{},{editing:!1})}))}));j.b.promise(n,{loading:"Updating...",success:"Edited!",error:"Error!"})}};return t?Object(f.jsxs)("div",{style:{width:"100vw",margin:"0 auto"},className:"profileSection",children:[Object(f.jsxs)("ul",{className:"userPosts",children:[Object(f.jsx)("button",{style:{color:"white"},onClick:function(e){return S&&C(!1)},className:"btn btn-second".concat(S?"ary":""," my-2 mx-1"),children:"Your Posts"}),Object(f.jsx)("button",{onClick:function(e){return S||C(!0)},className:"btn btn-second".concat(S?"":"ary"," my-2 mx-1"),children:"Saved Posts"}),S?g[0]?g.map((function(e){return Object(f.jsx)(x,{inUser:!0,title:e.title,text:e.text,id:e._id,username:e.user,coffees:e.likes,postForum:e.forum,sessionUsername:t?t.username:""},e._id)})):Object(f.jsx)("h3",{style:{textAlign:"center"},children:"Any Saved Post Yet"}):r.length>0?r.map((function(e){return Object(f.jsx)(x,{inUser:!0,title:e.title,text:e.text,postForum:e.forum,id:e._id,username:e.user,coffees:e.likes,sessionUsername:t?t.username:""},e._id)})):(setTimeout((function(){b(!1)}),2e3),d?Object(f.jsx)(G.a,{className:"mt-5",animation:"border"}):Object(f.jsx)("h3",{style:{textAlign:"center"},children:"Any Post Yet"}))]}),Object(f.jsxs)("section",{className:"userInfo",children:[Object(f.jsxs)("h3",{children:[" ",t.username,Object(f.jsx)("button",{onClick:function(){return n()},className:"logout",children:Object(f.jsx)(z.a,{})})]}),Object(f.jsxs)("div",{className:"descriptionSection",children:[Object(f.jsx)("textarea",{disabled:!F.editing,onChange:function(e){return L((function(t){return Object(p.a)(Object(p.a)({},t),{},{description:e.target.value})}))},value:F.description,className:"form-control",placeholder:"Description"}),Object(f.jsx)("div",{style:{minWidth:"50px",width:"25%"},children:F.editing?Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:U,children:Object(f.jsx)(q.a,{})}),Object(f.jsx)("button",{onClick:T,children:Object(f.jsx)(K.a,{})})]}):Object(f.jsx)("button",{onClick:T,children:Object(f.jsx)(Q.a,{})})})]}),Object(f.jsx)("h3",{children:"Forums:"}),Object(f.jsx)("div",{style:{minHeight:"50vh"},className:" d-flex flex-column overflow-auto",children:t.forums&&t.forums.length>0?t.forums.map((function(e){return Object(f.jsxs)(h.b,{className:"my-1 mx-3 d-flex alig-items-center card px-3 py-2",to:"/Forum/".concat(e),children:[" ",Object(f.jsx)("h4",{children:e})," "]})})):Object(f.jsx)("h3",{style:{textAlign:"center"},children:" Any forum "})})]})]}):Object(f.jsx)(k.a,{to:"/LogIn"})},X=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)([]),r=Object(o.a)(a,2),d=r[0],b=r[1],m=Object(s.useState)(null),O=Object(o.a)(m,2),x=O[0],g=O[1],v=Object(s.useState)(!1),N=Object(o.a)(v,2),S=N[0],C=N[1],w=Object(s.useState)(!1),P=Object(o.a)(w,2),L=P[0],T=P[1];Object(s.useEffect)((function(){!function(e){I.a.get("/api/posts").then((function(t){e(t.data.posts)}))}(b),function(e){I.a.get("/api/forums").then((function(t){e(t.data.forums)}))}(c),function(e){I.a.get("/api/user").then((function(t){if(t.data.msg)return null;e(t.data),console.log(t.data),j.b.success("Welcome back ".concat(t.data.username,"!"),{icon:"\ud83d\udc4b",duration:1500})}))}(g)}),[]);var M=function(e){return function(e,t){var n=I.a.post("/api/posts",e).then((function(e){t((function(t){return[e.data].concat(Object(E.a)(t))}))}));j.b.promise(n,{loading:"Posting...",success:"Posted!",error:function(e){return console.log(e)}})}(e,b)},A=function(e){return function(e,t,n){var s=[],c=I.a.delete("/api/posts/".concat(e)).then((function(c){n.forEach((function(t){return t._id===e?null:s.push(t)})),t(s)}));j.b.promise(c,{loading:"Deleting...",success:"Successfully deleted",error:function(e){return"This just happened: ".concat(e.toString(),"!")}})}(e,b,d)},_=function(e,t){return function(e,t,n){I.a.put("/api/posts/".concat(e),t).then((function(t){t.data[0]&&n((function(n){return n.map((function(n){return n._id!==e?n:t.data}))})),j.b.success("Successfully updated!")}))}(e,t,b)},B=function(e,t,n){return function(e,t,n,s,c){if(s){var a=I.a.put("/api/users/".concat(s?s.id:"none"),{postId:e,savedPosts:s.savedPosts}).then((function(e){t((function(e){return!e})),c((function(t){return Object(p.a)(Object(p.a)({},t),{},{savedPosts:e.data.readyUser.savedPosts})}))}));j.b.promise(a,{loading:"Saving...",success:"Succesfyllu ".concat(n?"UnSaved":"Saved"),error:function(e){return"Error while saving: ".concat(e.data)}})}else j.b.error("You are not logged in...")}(e,t,n,x,g)},D=Object(s.useState)(!1),G=Object(o.a)(D,2),z=G[0],q=G[1];return Object(f.jsx)(h.a,{children:Object(f.jsxs)("div",{onClick:function(e){"navItem"!==e.target.classList[0]&&q(!1)},className:"main",children:[Object(f.jsx)(j.a,{position:window.screen.width>600?"top-right":"top-center",reverseOrder:!1,toastOptions:{className:"toast"}}),Object(f.jsxs)("div",{className:"navBarResponsiveBtn",children:[Object(f.jsx)("button",{onClick:window.window<600?{}:function(){C((function(e){return!e}))},children:S?Object(f.jsx)(i.a,{}):Object(f.jsx)(l.a,{})}),Object(f.jsxs)("button",{className:"gap-2 navText",children:[Object(f.jsx)(u.a,{}),"CoffeePosts"]})]}),Object(f.jsx)(F,{setNavBarOpen:C,navBarOpen:S,postsList:d,user:x,setDisplayShow:q,displayShow:z}),Object(f.jsx)("hr",{className:"my-5"}),Object(f.jsxs)(k.d,{children:[Object(f.jsx)(k.b,{path:"/Post/:postId&:editingParam",children:Object(f.jsx)(U,{sessionUsername:x?x.username:"",addPost:M,savePost:B,deletePost:A,updatePost:_,user:x,setPostsList:b})}),Object(f.jsx)(k.b,{path:"/Post/:postId",children:Object(f.jsx)(U,{sessionUsername:x?x.username:"",addPost:M,savePost:B,setPostsList:b,deletePost:A,updatePost:_})}),Object(f.jsx)(k.b,{path:"/Forums",children:Object(f.jsx)(Y,{setUser:g,addPost:M,user:x,forums:n,createForm:function(e){return function(e,t,n){var s=I.a.post("/api/forums",e).then((function(e){e.data&&(t((function(t){return[].concat(Object(E.a)(t),[e.data[1]])})),n(!1))}));j.b.promise(s,{loading:"Creating form...",success:"Forum created!",error:"The forum alredy exist!"})}(e,c,T)},showModal:L,setShowModal:T})}),Object(f.jsx)(k.b,{path:"/Forum/:forum",children:Object(f.jsx)(J,{})}),Object(f.jsx)(k.b,{path:"/Profile/:user",children:Object(f.jsx)(W,{})}),Object(f.jsx)(k.b,{path:"/Profile",children:Object(f.jsx)(V,{logOutFunction:function(e){return function(e){I.a.get("/api/logout").then((function(){e(null),Object(j.b)("Logged Out!",{icon:"\ud83d\udc4c"})}))}(g)},user:x})}),Object(f.jsx)(k.b,{path:"/LogIn",children:Object(f.jsx)(R,{logInFunction:function(e){return function(e,t){var n=I.a.post("api/login",e).then((function(e){var n=Object(o.a)(e.data,2),s=n[0],c=n[1],a=c.username,r=c._id,i=c.createdAt,l=c.savedPosts,u=c.forums;s?t({username:a,id:r,createdAt:i,savedPosts:l,forums:u}):(t(null),j.b.error("Username or Password wrong!"))}));j.b.promise(n,{loading:"Login in...",error:"User or Password are wrong!",success:"Logged!"})}(e,g)},user:x})}),Object(f.jsx)(k.b,{path:"/Register",children:Object(f.jsx)(H,{registerFunction:function(e){return function(e,t){if(""!==e.username&&""!==e.password){var n=I.a.post("api/register",e).then((function(e){t(e.data[1])}));j.b.promise(n,{loading:"Registering...",success:"User Created!",error:function(e){return e.toString()}})}}(e,g)},user:x})}),Object(f.jsx)(k.b,{path:"/Home",children:Object(f.jsx)(y,{user:x,postsList:d,addPost:M,deletePost:A,updatePost:_,savePost:B,forums:n.length>0?n:[]})}),Object(f.jsx)(k.b,{path:"/:noFound",children:function(){return Object(f.jsx)("h3",{style:{textAlign:"center"},children:"404 Page Not Found"})}}),Object(f.jsx)(k.b,{path:"/",children:Object(f.jsx)(k.a,{to:"/Home"})})]})]})})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,88)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),s(e),c(e),a(e),r(e)}))};r.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(X,{})}),document.getElementById("root")),Z()}},[[66,1,2]]]);
//# sourceMappingURL=main.8563fa20.chunk.js.map